{"version":3,"sources":["detach/IosLocalization.js"],"names":["async","supportingDirectory","context","let","locales","type","await","getResolvedLocalesAsync","config","undefined","lang","localizationObj","Object","entries","dir","path","join","fs","mkdirpSync","strings","buffer","plistKey","localVersion","push","writeFile","writeLocalizationResourcesAsync"],"mappings":";;;;;;;;+BAIOA,WAA+C,EAAEC,mBAAF,EAAuBC,OAAvB,EAA/CF,EAAiF;AACtFG,QAAIC,UAAU,EAAdD;AACA,QAAID,QAAQG,IAARH,KAAiB,MAArB,EAA6B;AAC3BE,gBAAUE,MAAMC,uEAAwBL,QAAQM,MAAhCD,CAAhBH;AACF,KAFA,MAEO,IAAIF,QAAQG,IAARH,KAAiB,SAArB,EAAgC;AACrCE,gBAAUF,QAAQM,MAARN,CAAeE,OAAfF,KAA2BO,SAA3BP,GAAuCA,QAAQM,MAARN,CAAeE,OAAtDF,GAAgE,EAA1EE;AACF;AACA,SAAK,MAAM,CAACM,IAAD,EAAOC,eAAP,CAAX,IAAsCC,OAAOC,OAAPD,CAAeR,OAAfQ,CAAtC,EAA+D;AAC7D,YAAME,MAAMC,cAAKC,IAALD,CAAUd,mBAAVc,EAAgC,GAAEL,IAAK,QAAvCK,CAAZ;AACAE,4CAAGC,UAAHD,CAAcH,GAAdG;AACA,YAAME,UAAUJ,cAAKC,IAALD,CAAUD,GAAVC,EAAe,mBAAfA,CAAhB;AACA,YAAMK,SAAS,EAAf;AACA,WAAK,MAAM,CAACC,QAAD,EAAWC,YAAX,CAAX,IAAuCV,OAAOC,OAAPD,CAAeD,eAAfC,CAAvC,EAAwE;AACtEQ,eAAOG,IAAPH,CAAa,GAAEC,QAAS,OAAMC,YAAa,IAA3CF;AACF;AACAd,YAAMW,sCAAGO,SAAHP,CAAaE,OAAbF,EAAsBG,OAAOJ,IAAPI,CAAY,IAAZA,CAAtBH,CAANX;AACF;AACF,G;;kBAjBsBmB,+B;;;;;;;AAJtB;AAAA;AAAA;;AACA;;;;AACA;AAAA;AAAA","file":"../../detach/IosLocalization.js","sourcesContent":["import fs from 'fs-extra';\nimport path from 'path';\nimport { getResolvedLocalesAsync } from './ExponentTools';\n\nexport async function writeLocalizationResourcesAsync({ supportingDirectory, context }) {\n  let locales = {};\n  if (context.type === 'user') {\n    locales = await getResolvedLocalesAsync(context.config);\n  } else if (context.type === 'service') {\n    locales = context.config.locales !== undefined ? context.config.locales : {};\n  }\n  for (const [lang, localizationObj] of Object.entries(locales)) {\n    const dir = path.join(supportingDirectory, `${lang}.lproj`);\n    fs.mkdirpSync(dir);\n    const strings = path.join(dir, 'InfoPlist.strings');\n    const buffer = [];\n    for (const [plistKey, localVersion] of Object.entries(localizationObj)) {\n      buffer.push(`${plistKey} = \"${localVersion}\";`);\n    }\n    await fs.writeFile(strings, buffer.join('\\n'));\n  }\n}\n"],"sourceRoot":"/xdl@52.0.12/src"}